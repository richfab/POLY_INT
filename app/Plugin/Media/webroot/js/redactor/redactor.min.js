alert('Redactor is not included with this plugin cause it\'s not open source, you can still buy a licence and add the redactor.js code here in /Plugin/Media/webroot/js/redactor/redactor.min.js');


if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};

RedactorPlugins.fullscreen = {

	init: function()
	{
		this.fullscreen = false;
		this.addBtn('fullscreen', 'Fullscreen', function(obj)
		{
			obj.toggleFullscreen();
		});

		this.setBtnRight('fullscreen');
	},
	toggleFullscreen: function()
	{
		var html;

		if (this.fullscreen === false)
		{
			this.changeBtnIcon('fullscreen', 'normalscreen');
			this.setBtnActive('fullscreen');
			this.fullscreen = true;

			this.fsheight = this.$editor.height();

			this.tmpspan = $('<span></span>');
			this.$box.addClass('redactor_box_fullscreen').after(this.tmpspan);

			$('body, html').css('overflow', 'hidden');
			$('body').prepend(this.$box);

			this.fullScreenResize();
			$(window).resize($.proxy(this.fullScreenResize, this));
			$(document).scrollTop(0,0);

			this.$editor.focus();
		}
		else
		{
			this.removeBtnIcon('fullscreen', 'normalscreen');
			this.setBtnInactive('fullscreen');
			this.fullscreen = false;

			$(window).unbind('resize', $.proxy(this.fullScreenResize, this));
			$('body, html').css('overflow', '');

			this.$box.removeClass('redactor_box_fullscreen').css({ width: 'auto', height: 'auto' });
			this.tmpspan.after(this.$box).remove();

			this.syncCode();


			if (this.opts.autoresize)
			{
				this.$el.css('height', 'auto');
				this.$editor.css('height', 'auto')
			}
			else
			{
				this.$el.css('height', this.fsheight);
				this.$editor.css('height', this.fsheight)
			}

			this.$editor.focus();
		}
	},
	fullScreenResize: function()
	{
		if (this.fullscreen === false)
		{
			return false;
		}

		var pad = this.$editor.css('padding-top').replace('px', '');
		var height = $(window).height() - 34;
		this.$box.width($(window).width() - 2).height(height+34);
		this.$editor.height(height-(pad*2));
		this.$el.height(height);
	},
}



jQuery(function($){

	$('.redactor').each(function(){
		$(this).redactor({
			fixed: true,
			lang: 'fr',
			plugins: ['fullscreen'],
			buttons: ['html', '|', 'formatting', '|', 'bold', 'italic', 'deleted', '|',
'unorderedlist', 'orderedlist', '|',
'image', 'link', '|', '|', 'alignment', '|', 'horizontalrule'],
			allowedTags: ["code", "div", "a", "br", "p", "b", "i", "h1", "h2", "h3", "h4", "h5", "h6","img","blockquote"],
			modal_image: '<iframe width="610" height="800" src="'+$('#explorer').val()+'/editor:redactor?id='+$(this).attr('id')+'" id="medias'+$(this).attr('id')+'">',
		});
	});

});

function send_to_redactor(html, win, id){
	$('#' + id).execCommand('inserthtml', html)
	$('#' + id).data('redactor').modalClose()
}

